<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>Social Network Analysis in R</title>
    <meta charset="utf-8" />
    <meta name="author" content="Department of Defense Analysis" />
    <meta name="date" content="2019-05-23" />
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <script src="libs/jquery/jquery.min.js"></script>
    <link href="libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
    <script src="libs/datatables-binding/datatables.js"></script>
    <link href="libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core/js/jquery.dataTables.min.js"></script>
    <link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
    <script src="libs/crosstalk/js/crosstalk.min.js"></script>
    <script src="libs/kePrint/kePrint.js"></script>
    <link href="libs/vis/vis.css" rel="stylesheet" />
    <script src="libs/vis/vis.min.js"></script>
    <script src="libs/visNetwork-binding/visNetwork.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Social Network Analysis in R
## CORE Lab
### Department of Defense Analysis
### 2019-05-23

---







# Background

--
Social network analysis (SNA) is one of the many analytic methods commonly used to understand groups and social formations. 
--
**The focus of this methodology is the relationships among individuals, which influence a person's behavior above and beyond the influence of his or her individual attributes (Valente 2010). **
--
As such, SNA enables analysts to understand how social ties help to define, enable, and constrain the knowledge, reach, and capacities of actors within groups (Cunningham, Everton, and Murphy 2016).

--

While social network research is **not** exclusively dependent on software applications, these do increase the efficiency of researchers. Here we will focus on **R**.


---

# Goals

Here we will explore some of the key SNA features of the open-source programming language **R**, and a variety of packages - primarily **igraph** and **visNetwork**- developed to work with relational data. Specifically, we will:

--
  - Explore, structure, visualize, and analyze relational data with the **igraph** library

--
  - Build processes in **R** with **igraph** to streamline analysis
  
--
  - Create interactive visualizations with the **visNetwork** package


---

# Getting Started: Loading Data

Let's bring in data from an edgelist:


```r
read.csv(here::here("data/Familial.csv"), header = TRUE)
```

&lt;br&gt;

<div id="htmlwidget-71efda8667262ffd25d2" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-71efda8667262ffd25d2">{"x":{"filter":"none","fillContainer":true,"data":[["Adonis","Adonis","Adonis","Bananas","Bananas","Bananas","Bananas","Bat G.","Bat G.","Big G.","Boots","Boots","Boots","Boots","Boxcar","Boxcar","Brains","Brains","Fat Boy","Fat Boy","Fat Boy","Slingshot","Freckles","Freckles","Ghost","Goldie","Goldie","Pookey","Icepick","Snake"],["Boxcar","Ghost","Jelly","Blue Eyes","Brains","Slingshot","Gremlin","Big G.","Blaze","Blaze","Fat Boy","Freckles","Icepick","Repo Girl","Ghost","Jelly","Slingshot","Gremlin","Freckles","Icepick","Repo Girl","Gremlin","Icepick","Repo Girl","Jelly","Pookey","O.G.","O.G.","Repo Girl","Sonny Black"],["Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial"]],"container":"<table class=\"cell-border stripe fill-container\">\n  <thead>\n    <tr>\n      <th>Source<\/th>\n      <th>Target<\/th>\n      <th>Relationship<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLenght":7,"autoWidth":false,"dom":"tp","order":[],"orderClasses":false}},"evals":[],"jsHooks":[]}</script>


---

# Relationships Codebook

  * Familial: (person-to-person) - Defined as any family connection through blood, adoption, or marriage.
  * Financial: person-to-person) - Defined as two actors, in reporting or intelligence, who are explicitly stated as transferring funds between one another for any purpose, legal or illegal. 
  * Friendship: (person-to-person) - Defined as two individuals who are explicitly stated as friends, or who are explicitly known as trusted confidants, in reports or in intelligence documentation. 
  * Hierarchy: (person-to-person) - Defined as relationships between immediate superiors and subordinates in a non-criminal organization. 
  
  
---

# Relationships Import

Friendship:

```r
familial &lt;- read.csv(here::here("data/Familial.csv"), header = TRUE)
```

Financial:

```r
financial &lt;- read.csv(here::here("data/Financial.csv"), header = TRUE)
```

Friendship:

```r
friendship &lt;- read.csv(here::here("data/Friendship.csv"), header = TRUE)
```

Hierarchy:

```r
hierarchy &lt;- read.csv(here::here("data/Hierarchy.csv"), header = TRUE)
```


---

# Building Networks

First, install the package:

```r
install.packages("igraph")
```

Now load the package:

```r
library(igraph)
```

Create an **igraph** graph:

```r
familialNet &lt;- igraph::graph_from_data_frame(familial,
                                     directed = FALSE) 
```


---

# Familial Network Object


```r
familialNet
```

```
## IGRAPH f874452 UN-- 22 30 -- 
## + attr: name (v/c), Relationship (e/c)
## + edges from f874452 (vertex names):
##  [1] Adonis   --Boxcar    Adonis   --Ghost     Adonis   --Jelly    
##  [4] Bananas  --Blue Eyes Bananas  --Brains    Bananas  --Slingshot
##  [7] Bananas  --Gremlin   Bat G.   --Big G.    Bat G.   --Blaze    
## [10] Big G.   --Blaze     Boots    --Fat Boy   Boots    --Freckles 
## [13] Boots    --Icepick   Boots    --Repo Girl Boxcar   --Ghost    
## [16] Boxcar   --Jelly     Brains   --Slingshot Brains   --Gremlin  
## [19] Fat Boy  --Freckles  Fat Boy  --Icepick   Fat Boy  --Repo Girl
## [22] Slingshot--Gremlin   Freckles --Icepick   Freckles --Repo Girl
## + ... omitted several edges
```

--
  * `name` listed as `(v/c)`, which denotes a vertex-level character attributes

--
  * `Relationship` listed as `(e/c)` or edge-level character attributes


---

# Familial Network Edges


```r
E(familialNet)
```

```
## + 30/30 edges from f874452 (vertex names):
##  [1] Adonis   --Boxcar      Adonis   --Ghost       Adonis   --Jelly      
##  [4] Bananas  --Blue Eyes   Bananas  --Brains      Bananas  --Slingshot  
##  [7] Bananas  --Gremlin     Bat G.   --Big G.      Bat G.   --Blaze      
## [10] Big G.   --Blaze       Boots    --Fat Boy     Boots    --Freckles   
## [13] Boots    --Icepick     Boots    --Repo Girl   Boxcar   --Ghost      
## [16] Boxcar   --Jelly       Brains   --Slingshot   Brains   --Gremlin    
## [19] Fat Boy  --Freckles    Fat Boy  --Icepick     Fat Boy  --Repo Girl  
## [22] Slingshot--Gremlin     Freckles --Icepick     Freckles --Repo Girl  
## [25] Ghost    --Jelly       Goldie   --Pookey      Goldie   --O.G.       
## [28] Pookey   --O.G.        Icepick  --Repo Girl   Snake    --Sonny Black
```


```r
ecount(familialNet)
```

```
## [1] 30
```


---

# Familial Network Nodes


```r
V(familialNet)
```

```
## + 22/22 vertices, named, from f874452:
##  [1] Adonis      Bananas     Bat G.      Big G.      Boots      
##  [6] Boxcar      Brains      Fat Boy     Slingshot   Freckles   
## [11] Ghost       Goldie      Pookey      Icepick     Snake      
## [16] Jelly       Blue Eyes   Gremlin     Blaze       Repo Girl  
## [21] O.G.        Sonny Black
```


```r
vcount(familialNet)
```

```
## [1] 22
```


```r
V(familialNet)$name
```

```
##  [1] "Adonis"      "Bananas"     "Bat G."      "Big G."      "Boots"      
##  [6] "Boxcar"      "Brains"      "Fat Boy"     "Slingshot"   "Freckles"   
## [11] "Ghost"       "Goldie"      "Pookey"      "Icepick"     "Snake"      
## [16] "Jelly"       "Blue Eyes"   "Gremlin"     "Blaze"       "Repo Girl"  
## [21] "O.G."        "Sonny Black"
```


---

# Familial Network Visualization


```r
plot.igraph(familialNet)
```
.center[
![](SNAinR_files/figure-html/unnamed-chunk-17-1.png)&lt;!-- --&gt;
]


---

# Familial Network Visualization

.pull-left[

```r
plot.igraph(familialNet,
            # Nodes ====
            vertex.label = NA,
            vertex.color = "blue",
            vertex.size = 5,
            # Edge ====
            edge.color = "black",
            edge.arrow.size = 0,
            edge.curved = TRUE,
            # Other ====
            margin = .01,
            frame = FALSE,
            main = "Familial Network"
            )
```

.center[
Arguments = ðŸ˜„
]
]

.pull-right[
![](SNAinR_files/figure-html/unnamed-chunk-19-1.png)&lt;!-- --&gt;
]


---

#So What?

--
.center[
Automation! Automation! Automation! 
]

--
.pull-left[

```r
read.csv(here::here("data/Financial.csv"), header = TRUE) %&gt;%
  igraph::graph_from_data_frame(directed = FALSE) %&gt;%
  igraph::plot.igraph(vertex.label=NA,
            vertex.color="blue",
            vertex.size=5,
            edge.color="black",
            edge.arrow.size=0,
            edge.curved=TRUE, 
            margin = .01,
            frame = FALSE
            )
```

.center[
ðŸ¤‘
]
]
.pull-right[
![](SNAinR_files/figure-html/unnamed-chunk-21-1.png)&lt;!-- --&gt;
]


---

# Automation! Automation! Automation!

.center[
![](images/multipleCSVs.png)
]


---

# Automation! Automation! Automation!

.pull-left[

```r
files &lt;- list.files(path="data/onemode/",
                    pattern = "*.csv",
                    full.names = TRUE)
files %&gt;%
  purrr::map_dfr(., ~.x %&gt;% read_csv) %&gt;%
  igraph::graph_from_data_frame(directed = FALSE) %&gt;%
  igraph::set_edge_attr("color",
                          value = dplyr::case_when(
                            E(.)$Relationship == "Familial" ~ "#d7191c",
                            E(.)$Relationship == "Financial" ~ "#fdae61",
                            E(.)$Relationship == "Friendship" ~ "#abd9e9",
                            E(.)$Relationship == "Hierarchy" ~ "#2c7bb6"
                          )) %&gt;%
  igraph::plot.igraph(vertex.label=NA,
                      vertex.color="grey",
                      vertex.size=5,
                      edge.arrow.size=0,
                      edge.curved=TRUE, 
                      margin = .01
                      )
```
]
.pull-right[
![](SNAinR_files/figure-html/unnamed-chunk-23-1.png)&lt;!-- --&gt;
]


---

# Metrics in Igraph

Q: Now that you have data, how can you analyze it?

--
A: Start with network-level measures

Metric  | Explanation | Command
--------|-------------|---------
Density  | Number of observed ties divided by possible number of ties  | `edge_density()`
Average Degree  | Sum of ties divided by number of actors | `mean(degree())`
Global Clustering  | Sum of each actor's clustering divided by number of actors  | `transitivity()`


---

# Network-Level Measures


```r
g &lt;- list.files(path="data/onemode/",
                    pattern = "*.csv",
                    full.names = TRUE) %&gt;%
  purrr::map_dfr(read_csv) %&gt;%
  igraph::graph_from_data_frame(directed = FALSE) %&gt;%
  igraph::set.graph.attribute("density", edge_density(.)) %&gt;%
  igraph::set.graph.attribute("avg_degree", mean(degree(.))) %&gt;%
  igraph::set.graph.attribute("avg_clu_coef", transitivity(., "average")) 
```


```r
graph_attr(g, "density")
```

```
## [1] 0.1188406
```


```r
graph_attr(g, "avg_degree")
```

```
## [1] 5.347826
```


```r
graph_attr(g, "avg_degree")
```

```
## [1] 5.347826
```


---

# Network-Level Measures Report


```r
data.frame(
  "Density" = graph_attr(g, "density"),
  "Avg. Degree" = graph_attr(g, "avg_degree"),
  "Avg. Clustering Coefficient" = graph_attr(g, "avg_degree")
) %&gt;%
  knitr::kable(format = "html", digits = 3, caption = "Demo Table") %&gt;%
  kableExtra::kable_styling(bootstrap_options = c("striped", "condensed")) %&gt;%
  kableExtra::add_footnote(label = "table footnote", notation = "number")
```

&lt;table class="table table-striped table-condensed" style="margin-left: auto; margin-right: auto;"&gt;
&lt;caption&gt;Demo Table&lt;/caption&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; Density &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Avg..Degree &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Avg..Clustering.Coefficient &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0.119 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5.348 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5.348 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;tfoot&gt;
&lt;tr&gt;
&lt;td style = 'padding: 0; border:0;' colspan='100%'&gt;&lt;sup&gt;1&lt;/sup&gt; table footnote&lt;/td&gt;
&lt;/tr&gt;
&lt;/tfoot&gt;
&lt;/table&gt;


---

# Metrics in Igraph

Q: Now that I've looked at network-level measures, what do I do?

--

A: Calculate vertex-level metrics.

Metric  | Explanation | Command
--------|-------------|---------
Degree  | Count of actor's ties  | `degree()`
Eigenvector  | Weights an actor's centrality by the centrality of its neighbors  | `evcent()`
Betweenness  | How often each actor lies on the shortest path between all other actors  | `betweenness()`


---

# Vertex-Level Measures


```r
g %&gt;%
  igraph::set.vertex.attribute("degree", value=degree(.)) %&gt;%
  igraph::set.vertex.attribute("eigenvector", value=round(evcent(.)$vector, 2)) %&gt;%
  igraph::set.vertex.attribute("betweenness", value=round(betweenness(.), 2)) %&gt;%
  igraph::get.data.frame("vertices") %&gt;%
  DT::datatable(rownames = F,
                options = list(
                  pageLength=10,
                  dom="tp"
                ))
```

&lt;!iv id="htmlwidget-17cc76b68c0718b49e89" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-17cc76b68c0718b49e89">{"x":{"filter":"none","data":[["Adonis","Bananas","Bat G.","Big G.","Boots","Boxcar","Brains","Fat Boy","Slingshot","Freckles","Ghost","Goldie","Pookey","Icepick","Snake","Animal","Ant","Bugs","Bloodhound","Cranky","Enforcer","O.G.","4 Stroke","The Barber","Bow Wow","The Dentist","Frosty","Blood Messiah","Baby Face","Book Collector","Blue Eyes","Dapper Don","Fast Trigger","Scratch","Shadow","Jelly","Gremlin","Blaze","Repo Girl","Sonny Black","Crusier","Little Red","Ha-Ha","Clown","Smiley","Smoke"],[6,9,8,4,9,6,6,11,9,12,6,6,4,8,6,6,3,1,11,3,2,31,3,2,3,6,5,1,2,1,4,1,2,1,4,6,6,4,8,2,6,4,4,1,2,1],[0,0.31,0.25,0.07,0.66,0,0.19,0.74,0.34,0.69,0,0.43,0.32,0.6,0.27,0.15,0.13,0.02,0.41,0.24,0.15,1,0.18,0.16,0.27,0.32,0.31,0.01,0.04,0.11,0.18,0.08,0.16,0.01,0.07,0,0.19,0.07,0.6,0.06,0.35,0.06,0.3,0,0.14,0.11],[0,35.8,79,0,0,0,0,211.2,42.97,79,0,1.5,0,0,54.4,5,31.67,0,43.23,3.5,0,638.63,0,0,0,118.33,0.67,0,40,0,40,0,0,0,40,0,0,0,0,0,93.6,41.5,0,0,0,0]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>name<\/th>\n      <th>degree<\/th>\n      <th>eigenvector<\/th>\n      <th>betweenness<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"dom":"tp","columnDefs":[{"className":"dt-right","targets":[1,2,3]}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><!
---

# Interactive Visuals

First, install the package:

```r
install.packages("visNetwork")
```

Now load the package:

```r
library(visNetwork)
```


---

# visNetwork with Igraph


```r
visNetwork::visIgraph(g) 
```

.center[
&lt;!iv id="htmlwidget-c2a475496231ca59e763" style="width:504px;height:504px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-c2a475496231ca59e763">{"x":{"nodes":{"id":["Adonis","Bananas","Bat G.","Big G.","Boots","Boxcar","Brains","Fat Boy","Slingshot","Freckles","Ghost","Goldie","Pookey","Icepick","Snake","Animal","Ant","Bugs","Bloodhound","Cranky","Enforcer","O.G.","4 Stroke","The Barber","Bow Wow","The Dentist","Frosty","Blood Messiah","Baby Face","Book Collector","Blue Eyes","Dapper Don","Fast Trigger","Scratch","Shadow","Jelly","Gremlin","Blaze","Repo Girl","Sonny Black","Crusier","Little Red","Ha-Ha","Clown","Smiley","Smoke"],"label":["Adonis","Bananas","Bat G.","Big G.","Boots","Boxcar","Brains","Fat Boy","Slingshot","Freckles","Ghost","Goldie","Pookey","Icepick","Snake","Animal","Ant","Bugs","Bloodhound","Cranky","Enforcer","O.G.","4 Stroke","The Barber","Bow Wow","The Dentist","Frosty","Blood Messiah","Baby Face","Book Collector","Blue Eyes","Dapper Don","Fast Trigger","Scratch","Shadow","Jelly","Gremlin","Blaze","Repo Girl","Sonny Black","Crusier","Little Red","Ha-Ha","Clown","Smiley","Smoke"],"x":[-0.895017579821955,-0.0619148875023591,0.633695347498546,0.85898339876283,-0.225865298096753,-0.860895178271063,-0.254946552498897,-0.0814799464443642,-0.062277539028687,-0.137192690642285,-1,0.412760843651008,0.397564190898905,-0.143131916196152,-0.238434931118556,-0.423240977033607,0.434017473141245,0.0868955438233312,0.259688083824936,0.0604545235035878,-0.240289951311332,0.190825650856301,0.609513320237335,0.0113603279789418,0.304380197628529,0.44120794259279,0.473366282305665,-0.869141173397255,0.800820612665081,0.360838114394464,0.100013621509721,0.0126030445594347,0.198367525969103,0.649111279940906,-0.601355313750265,-0.972235607659655,-0.176994958886658,0.901307735318719,-0.0505801810844565,-0.491279309370281,-0.201818096631517,0.550338224652571,0.0362829587050757,1,0.522845085354716,0.200228760507263],"y":[-0.470282663366179,0.598875571057605,0.319985020157558,0.456065622298492,-0.627280836522094,-0.355079668194085,0.652022510158377,-0.401344737385497,0.482140184691877,-0.736594874236435,-0.413131336848434,0.140510121578168,0.0199940616069756,-0.594051236969216,0.218207142948108,0.0727855618542961,-0.279203945560174,1,0.192531334289989,-0.117032412945536,-0.935830664314416,0.163622557172128,0.113527662464215,0.0839806223012873,0.35681310826653,-0.093965140522926,0.218853075445911,0.205287966550654,-0.312980544284472,0.590766484807573,0.676069639027668,-1,0.45077049319853,-0.735838128472763,0.0705665055881952,-0.29729286855773,0.727752575860608,0.337214972058971,-0.640992484476582,0.354760627820311,-0.016496977836697,-0.456371893638803,0.30547384235065,-0.46427284446247,0.460578980743453,-0.221188703712814]},"edges":{"from":["Adonis","Adonis","Adonis","Bananas","Bananas","Bananas","Bananas","Bat G.","Bat G.","Big G.","Boots","Boots","Boots","Boots","Boxcar","Boxcar","Brains","Brains","Fat Boy","Fat Boy","Fat Boy","Slingshot","Freckles","Freckles","Ghost","Goldie","Goldie","Pookey","Icepick","Snake","Animal","Snake","Animal","Ant","Bugs","Bloodhound","Bloodhound","Cranky","Freckles","Fat Boy","Fat Boy","Slingshot","O.G.","Snake","O.G.","4 Stroke","Adonis","Adonis","Adonis","Bananas","Bananas","Bananas","Bananas","O.G.","Bat G.","Bat G.","Big G.","Boots","Boots","Boots","Boots","Bloodhound","Bloodhound","Slingshot","O.G.","Boxcar","Boxcar","Brains","Brains","Fat Boy","O.G.","Fat Boy","Fat Boy","Fat Boy","Slingshot","Freckles","Freckles","O.G.","Ghost","Goldie","Goldie","Pookey","O.G.","Icepick","Snake","4 Stroke","O.G.","Blood Messiah","Animal","Snake","Animal","Ant","Ant","Baby Face","The Dentist","Bananas","Bloodhound","Bat G.","Bat G.","Bat G.","Bat G.","O.G.","Boots","Bloodhound","Bloodhound","Bloodhound","Bloodhound","O.G.","O.G.","Freckles","O.G.","The Dentist","Freckles","O.G.","Slingshot","O.G.","Goldie","O.G.","O.G.","Snake","O.G.","Scratch","Shadow"],"to":["Boxcar","Ghost","Jelly","Blue Eyes","Brains","Slingshot","Gremlin","Big G.","Blaze","Blaze","Fat Boy","Freckles","Icepick","Repo Girl","Ghost","Jelly","Slingshot","Gremlin","Freckles","Icepick","Repo Girl","Gremlin","Icepick","Repo Girl","Jelly","Pookey","O.G.","O.G.","Repo Girl","Sonny Black","Shadow","Animal","Crusier","Little Red","Blue Eyes","Cranky","Ha-Ha","O.G.","Enforcer","O.G.","Crusier","Ha-Ha","Ha-Ha","O.G.","Crusier","Frosty","Boxcar","Ghost","Jelly","Blue Eyes","Brains","Slingshot","Gremlin","The Barber","Big G.","Blaze","Blaze","Fat Boy","Freckles","Icepick","Repo Girl","Bow Wow","The Dentist","Bloodhound","Bow Wow","Ghost","Jelly","Slingshot","Gremlin","Cranky","The Dentist","Freckles","Icepick","Repo Girl","Gremlin","Icepick","Repo Girl","Frosty","Jelly","Pookey","O.G.","O.G.","Ha-Ha","Repo Girl","Sonny Black","Frosty","4 Stroke","Shadow","Shadow","Animal","Crusier","O.G.","Little Red","Clown","Baby Face","O.G.","The Barber","Bloodhound","Goldie","O.G.","Smiley","Book Collector","Freckles","The Dentist","Fast Trigger","Frosty","O.G.","Blue Eyes","Bow Wow","Dapper Don","The Dentist","Little Red","Enforcer","Fast Trigger","O.G.","Frosty","O.G.","Smiley","Smoke","O.G.","Crusier","Little Red","Crusier"],"Relationship":["Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Financial","Financial","Financial","Financial","Financial","Financial","Financial","Financial","Financial","Financial","Financial","Financial","Financial","Financial","Financial","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate"]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"edges":{"smooth":false},"physics":{"stabilization":false},"height":"80%","width":"140%"},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)"},"main":null,"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","igraphlayout":{"type":"square"},"highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":false,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"}},"evals":[],"jsHooks":[]}</script><!


---

# visNetwork with Igraph Visualization Arguments


```r
g &lt;- g %&gt;%
  # Node attributes ====
  set.vertex.attribute("color.background", value = "grey") %&gt;%
  set.vertex.attribute("color.border", value = "black") %&gt;%
  set.vertex.attribute("borderWidth", value = 2) %&gt;% 
  set.vertex.attribute("size", value = degree(.)) %&gt;% 
  set.vertex.attribute("label", value = V(.)$name) %&gt;%
  # Edge attributes ====
  set.edge.attribute("width", value = scales::rescale(edge_betweenness(.), c(2,10))) %&gt;%
  set.edge.attribute("color", value = "slategrey") %&gt;%
  set.edge.attribute("smooth", value = FALSE) %&gt;%
  set.edge.attribute("shadow", value = TRUE)
```


---

# visNetwork with Igraph Visualization

.center[
&lt;!iv id="htmlwidget-06ce84022af0214bb9d2" style="width:504px;height:504px;" class="visNetwork html-widget"></div>
<script type="application/json" data-for="htmlwidget-06ce84022af0214bb9d2">{"x":{"nodes":{"id":["Adonis","Bananas","Bat G.","Big G.","Boots","Boxcar","Brains","Fat Boy","Slingshot","Freckles","Ghost","Goldie","Pookey","Icepick","Snake","Animal","Ant","Bugs","Bloodhound","Cranky","Enforcer","O.G.","4 Stroke","The Barber","Bow Wow","The Dentist","Frosty","Blood Messiah","Baby Face","Book Collector","Blue Eyes","Dapper Don","Fast Trigger","Scratch","Shadow","Jelly","Gremlin","Blaze","Repo Girl","Sonny Black","Crusier","Little Red","Ha-Ha","Clown","Smiley","Smoke"],"color.background":["grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey"],"color.border":["black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black","black"],"borderWidth":[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],"size":[6,9,8,4,9,6,6,11,9,12,6,6,4,8,6,6,3,1,11,3,2,31,3,2,3,6,5,1,2,1,4,1,2,1,4,6,6,4,8,2,6,4,4,1,2,1],"label":["Adonis","Bananas","Bat G.","Big G.","Boots","Boxcar","Brains","Fat Boy","Slingshot","Freckles","Ghost","Goldie","Pookey","Icepick","Snake","Animal","Ant","Bugs","Bloodhound","Cranky","Enforcer","O.G.","4 Stroke","The Barber","Bow Wow","The Dentist","Frosty","Blood Messiah","Baby Face","Book Collector","Blue Eyes","Dapper Don","Fast Trigger","Scratch","Shadow","Jelly","Gremlin","Blaze","Repo Girl","Sonny Black","Crusier","Little Red","Ha-Ha","Clown","Smiley","Smoke"],"x":[-1,0.348472047686258,-0.378346366100674,-0.645250552630009,-0.0756456832721107,-0.847713978027,0.447662593885696,0.0124726227710803,0.297165463837903,-0.10809533589442,-0.906676491536246,-0.138858409970689,-0.0986922531530199,-0.158054909022066,0.521482539223855,0.661772362832958,-0.295431697190032,0.425104299432349,0.00478995150535977,-0.0366806472594826,-0.0850153454319642,0.111385270220323,0.232827621547247,-0.0237559305284178,0.241610206995008,-0.13662801043064,0.180695541424669,1,-0.230733839406564,0.466571274732415,0.261010253031203,-0.319696032776693,0.0709033659876181,-0.70697620553471,0.787401684359534,-0.938739664619519,0.510486490142256,-0.641190446000019,0.00610517815900224,0.767943149058734,0.406417683185275,-0.451499303496111,0.17805287839852,-0.279916595759868,-0.295577451091928,0.389472326070747],"y":[0.532756445364679,0.26471707985302,-0.132513101877815,-0.194856797307122,0.652690086117435,0.517302683462506,0.39550763510908,0.446437343611828,0.155271464589003,0.770217695426167,0.612987386304883,-0.124883484541947,-0.00901510707909858,0.625833079093296,-0.144121075489799,0.0382057779959459,-0.416812491089114,0.721568877381971,-0.186400400529587,0.154604209322674,1,-0.117657344335879,-0.519314866318027,-0.403328894881111,-0.229711599120237,-0.401889491606829,-0.365199211431203,0.328512309677245,-0.782630180889088,-0.346099890194244,0.380973295852801,0.969801550997904,-0.472774957553602,-0.648966368421907,0.178194165158432,0.438631893927615,0.310631601849902,-0.0790880570349908,0.690513887136591,-0.258847981614207,0.102705196389655,-0.553279892035385,-0.000230004245054594,-1,0.021710473622873,-0.489151192249491]},"edges":{"from":["Adonis","Adonis","Adonis","Bananas","Bananas","Bananas","Bananas","Bat G.","Bat G.","Big G.","Boots","Boots","Boots","Boots","Boxcar","Boxcar","Brains","Brains","Fat Boy","Fat Boy","Fat Boy","Slingshot","Freckles","Freckles","Ghost","Goldie","Goldie","Pookey","Icepick","Snake","Animal","Snake","Animal","Ant","Bugs","Bloodhound","Bloodhound","Cranky","Freckles","Fat Boy","Fat Boy","Slingshot","O.G.","Snake","O.G.","4 Stroke","Adonis","Adonis","Adonis","Bananas","Bananas","Bananas","Bananas","O.G.","Bat G.","Bat G.","Big G.","Boots","Boots","Boots","Boots","Bloodhound","Bloodhound","Slingshot","O.G.","Boxcar","Boxcar","Brains","Brains","Fat Boy","O.G.","Fat Boy","Fat Boy","Fat Boy","Slingshot","Freckles","Freckles","O.G.","Ghost","Goldie","Goldie","Pookey","O.G.","Icepick","Snake","4 Stroke","O.G.","Blood Messiah","Animal","Snake","Animal","Ant","Ant","Baby Face","The Dentist","Bananas","Bloodhound","Bat G.","Bat G.","Bat G.","Bat G.","O.G.","Boots","Bloodhound","Bloodhound","Bloodhound","Bloodhound","O.G.","O.G.","Freckles","O.G.","The Dentist","Freckles","O.G.","Slingshot","O.G.","Goldie","O.G.","O.G.","Snake","O.G.","Scratch","Shadow"],"to":["Boxcar","Ghost","Jelly","Blue Eyes","Brains","Slingshot","Gremlin","Big G.","Blaze","Blaze","Fat Boy","Freckles","Icepick","Repo Girl","Ghost","Jelly","Slingshot","Gremlin","Freckles","Icepick","Repo Girl","Gremlin","Icepick","Repo Girl","Jelly","Pookey","O.G.","O.G.","Repo Girl","Sonny Black","Shadow","Animal","Crusier","Little Red","Blue Eyes","Cranky","Ha-Ha","O.G.","Enforcer","O.G.","Crusier","Ha-Ha","Ha-Ha","O.G.","Crusier","Frosty","Boxcar","Ghost","Jelly","Blue Eyes","Brains","Slingshot","Gremlin","The Barber","Big G.","Blaze","Blaze","Fat Boy","Freckles","Icepick","Repo Girl","Bow Wow","The Dentist","Bloodhound","Bow Wow","Ghost","Jelly","Slingshot","Gremlin","Cranky","The Dentist","Freckles","Icepick","Repo Girl","Gremlin","Icepick","Repo Girl","Frosty","Jelly","Pookey","O.G.","O.G.","Ha-Ha","Repo Girl","Sonny Black","Frosty","4 Stroke","Shadow","Shadow","Animal","Crusier","O.G.","Little Red","Clown","Baby Face","O.G.","The Barber","Bloodhound","Goldie","O.G.","Smiley","Book Collector","Freckles","The Dentist","Fast Trigger","Frosty","O.G.","Blue Eyes","Bow Wow","Dapper Don","The Dentist","Little Red","Enforcer","Fast Trigger","O.G.","Frosty","O.G.","Smiley","Smoke","O.G.","Crusier","Little Red","Crusier"],"Relationship":["Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Familial","Financial","Financial","Financial","Financial","Financial","Financial","Financial","Financial","Financial","Financial","Financial","Financial","Financial","Financial","Financial","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Friendship","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate","Superior-Subordinate"],"width":[2,2,2,2.12815533980583,2.33203883495146,2.0537216828479,2.33203883495146,2.75728155339806,2.75728155339806,2,2.67961165048544,2.01941747572816,2,2,2,2,2.40582524271845,2,4.07766990291262,2.67961165048544,2.67961165048544,2.40582524271845,2.03883495145631,2.03883495145631,2,2.02912621359223,2.45307443365696,2.72815533980583,2,2.77669902912621,2.09708737864078,2.39611650485437,2.43883495145631,2.66343042071197,3.57281553398058,2.42071197411003,2.16699029126214,2.95016181229773,2.77669902912621,10,3.11456310679612,2.11650485436893,2.61553398058252,3.67766990291262,3.9495145631068,2.01294498381877,2,2,2,2.12815533980583,2.33203883495146,2.0537216828479,2.33203883495146,3.26860841423948,2.75728155339806,2.75728155339806,2,2.67961165048544,2.01941747572816,2,2,2.19546925566343,2.50809061488673,2.64466019417476,2.66925566343042,2,2,2.40582524271845,2,2.43495145631068,4.36245954692557,4.07766990291262,2.67961165048544,2.67961165048544,2.40582524271845,2.03883495145631,2.03883495145631,2.64983818770227,2,2.02912621359223,2.45307443365696,2.72815533980583,2.61553398058252,2,2.77669902912621,2.01294498381877,3.50809061488673,3.57281553398058,2.09708737864078,2.39611650485437,2.43883495145631,4.66666666666667,2.66343042071197,3.57281553398058,5.0873786407767,4.50614886731392,2.28478964401295,2.80582524271845,2.1747572815534,5.43689320388349,2.12621359223301,3.57281553398058,2.01941747572816,2.50809061488673,2.28478964401295,2.22135922330097,2.6957928802589,4.79223300970874,2.66925566343042,3.57281553398058,4.36245954692557,3.83818770226537,2.77669902912621,3.26860841423948,4.26278317152104,2.64983818770227,2.45307443365696,3.42718446601942,3.57281553398058,3.67766990291262,3.9495145631068,3.57281553398058,4.85436893203883],"color":["slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey","slategrey"],"smooth":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false],"shadow":[true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true]},"nodesToDataframe":true,"edgesToDataframe":true,"options":{"nodes":{"shape":"dot","physics":false},"manipulation":{"enabled":false},"edges":{"smooth":false},"physics":{"stabilization":false},"height":"100%","width":"140%"},"groups":null,"width":null,"height":null,"idselection":{"enabled":false,"style":"width: 150px; height: 26px","useLabels":true,"main":"Select by id"},"byselection":{"enabled":false,"style":"width: 150px; height: 26px","multiple":false,"hideColor":"rgba(200,200,200,0.5)"},"main":null,"submain":null,"footer":null,"background":"rgba(0, 0, 0, 0)","igraphlayout":{"type":"square"},"highlight":{"enabled":false,"hoverNearest":false,"degree":1,"algorithm":"all","hideColor":"rgba(200,200,200,0.5)","labelOnly":true},"collapse":{"enabled":false,"fit":false,"resetHighlight":true,"clusterOptions":null,"keepCoord":true,"labelSuffix":"(cluster)"}},"evals":[],"jsHooks":[]}</script><!


---
&lt;br&gt;
.center[
### Questions?
]

![](images/wanna_see_the_code.png)

Dan Cunningham - dtcunning@nps.edu

Christopher Callaghan - cjcallag@nps.edu
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
